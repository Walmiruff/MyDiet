<h4>Plano Alimentar</h4>

<div class="card">
    <div class="card-body">
        <h5 class="card-title h5-custom">Utiliza tabelas de alimentos, com informações sobre nutrientes.</h5>
        <h6 class="card-subtitle mb-2 text-muted">Recurso que te ajuda na elaboração das dietas conforme distribuição
            energética, macronutrientes e micronutrientes.</h6>
        <br>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mr-3">
                    <form [formGroup]="formPlanoAlim">
                        <div class="row">
                            <div class="col-sm-12 mb-3">
                                <label class="strong-class" for="desc">Descrição</label>
                                <textarea class="form-control note-editor note-editor-margin" cols="30" rows="10"
                                    maxlength="200" id="descricao" formControlName="descricao"></textarea>
                                <small>
                                    Caracteres restantes
                                    <span>{{ formPlanoAlim.get('descricao').value === null ? 200 : 200 -
                                        formPlanoAlim.get('descricao').value.length }}</span>
                                </small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 mb-3">
                                <label for="dataAtend" class="strong-class">Data Atend.</label>
                                <input type="date" class="form-control" formControlName="dataAtend" id="dataAtend">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 mb-3">
                                <label class="strong-class">Dias da Semana <i class="fa mr-2 fas fa-info-circle"
                                        title="Nesta função, programe cardápios diferentes para cada dia da semana"></i></label>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="dom">
                                            <input type="checkbox" id="dom" formControlName="dom">
                                            <span class="margin-left-4 custom-control-description">Domingo</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="seg">
                                            <input type="checkbox" id="seg" formControlName="seg">
                                            <span class="margin-left-4 custom-control-description">Segunda-Feira</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="ter">
                                            <input type="checkbox" id="ter" formControlName="ter">
                                            <span class="margin-left-4 custom-control-description">Terça-Feira</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="qua">
                                            <input type="checkbox" id="qua" formControlName="qua">
                                            <span class="margin-left-4 custom-control-description">Quarta-Feira</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="qui">
                                            <input type="checkbox" id="qui" formControlName="qui">
                                            <span class="margin-left-4 custom-control-description">Quinta-Feira</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="sex">
                                            <input type="checkbox" id="sex" formControlName="sex">
                                            <span class="margin-left-4 custom-control-description">Sexta-Feira</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-check-label" for="sab">
                                            <input type="checkbox" id="sab" formControlName="sab">
                                            <span class="margin-left-4 custom-control-description">Sábado</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-7">
                    <div class="d-flex justify-content-between">
                        <label for="desc" class="strong-class">Refeições</label>
                        <div>
                            <button type="submit" class="btn btn-success  mr-2"
                                (click)="clearModalRef(); classicModal.show()">Adicionar</button>
                        </div>
                    </div>
                    <hr>
                    <!--Refeiçoes-->
                    <div class="ref-custom" *ngIf="refeicoes$ | async as refs">
                        <div class="row mb-5" *ngFor="let ref of refs">
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-12 d-flex justify-content-end">
                                        <p>{{ ref.horario }} - {{ ref.descricao }}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 d-flex justify-content-end">
                                        <em class="fa mr-2 fas fa-edit"
                                            (click)="updateRef(ref.id, false); classicModal.show()"></em>
                                        <em class="fa mr-2 fas fa-trash" (click)="deleteRef(ref.id)"></em>
                                        <em class="fa mr-2 fas fa-copy"
                                            (click)="updateRef(ref.id, true); classicModal.show()"></em>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <ul *ngFor="let alim of ref.alimentos | primOrSecOp: 1">
                                    <li class="d-flex justify-content-between"
                                        (click)="showAlimInfo(alim); alimDetailModal.show()">
                                        <a>{{ alim.descricao }}</a>
                                        <p>{{ alim.quantidade }} - {{ alim.porcao }}</p>
                                    </li>
                                </ul>
                                <p *ngIf="hasSecondOption(ref.alimentos)"><strong>Segunda Opção</strong></p>
                                <ul *ngFor="let alim of ref.alimentos | primOrSecOp: 2">
                                    <li class="d-flex justify-content-between"
                                        (click)="showAlimInfo(alim); alimDetailModal.show()">
                                        <a>{{ alim.descricao }}</a>
                                        <p>{{ alim.quantidade }} - {{ alim.porcao }}</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="d-flex justify-content-between mt-5">
                        <label class="strong-class">Planejamento Dietético</label>
                    </div>
                    <hr>
                    <form [formGroup]="formPlanoAlim">
                        <div class="row mb-4">
                            <div class="col-5">
                                <div class="row">
                                    <label>Peso <i class="fa mr-2 fas fa-info-circle"
                                            title="Peso para ser utilizado no cálculo de Proteína por Kg de Peso, pode ser o peso atual inserido na Avaliação Antropométrica ou desejado conforme a estratégia do tratamento."></i></label>
                                    <input type="number" step="0.01" class="form-control" formControlName="peso"
                                        id="peso" placeholder="quilos">
                                </div>
                            </div>
                            <div class="col-5 ml-3">
                                <div class="row">
                                    <label>Energia <i class="fa mr-2 fas fa-info-circle"
                                            title="Energia inserida no gastos energéticos"></i></label>
                                    <input type="number" step="0.01" class="form-control" formControlName="energia"
                                        id="energia" placeholder="Kcal">
                                </div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">
                                <div class="row">
                                    <label>Proteína g/Kg de Peso</label>
                                    <input type="number" step="0.01" class="form-control" formControlName="ptnGKgPeso"
                                        id="ptnGKgPeso" placeholder="g">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <button type="button" class="btn btn-outline-primary" (click)="showDistMacroMicro()">Exibir
                                distribuição de Macro e Micronutrientes</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

        <div class="container mt-5" id="macro" [hidden]="isDistMacroMicro">
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
                        aria-controls="nav-home" aria-selected="true">Macronutrientes</a>
                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
                        aria-controls="nav-profile" aria-selected="false">Distribuição Energética por Refeição</a>
                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab"
                        aria-controls="nav-contact" aria-selected="false">Nutrientes</a>
                    <!-- <a class="nav-item nav-link" id="nav-contact2-tab" data-toggle="tab" href="#nav-contact2" role="tab"
                        aria-controls="nav-contact2" aria-selected="false">Gráficos</a> -->
                </div>
            </nav>

            <div class="tab-content" id="nav-tabContent">

                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="panel-body">
                        <table class="table table-bordered margn-t-md">
                            <thead>
                                <tr>
                                    <th rowspan="2" style="vertical-align: middle;">Nutrientes</th>
                                    <th class="text-center">Distribuição (%)</th>
                                    <th class="text-center">kcal</th>
                                    <th class="text-center">Gramas</th>
                                </tr>
                                <tr>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-sm-6">Planejado</div>
                                            <div class="col-sm-6">Obtido</div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-sm-6">Planejado</div>
                                            <div class="col-sm-6">Obtido</div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-sm-6">Planejado</div>
                                            <div class="col-sm-6">Obtido</div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="padd-t-md-important">Carboidratos</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <form [formGroup]="formPlanoAlim">
                                                    <input class="form-control center-block text-center" type="number"
                                                        step="0.01" placeholder="%" id="distChoPlan"
                                                        formControlName="distChoPlan">
                                                </form>
                                            </div>
                                            <div class="col-md-6" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoCho * 4 * 100)/(macro.gObtidoLip * 9 + macro.gObtidoCho
                                                * 4 + macro.gObtidoPtn * 4) | replace:'%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.kcalCho | replace:'kcal' }}</div>
                                            <div class="col-md-6">
                                                {{ (macro.gObtidoCho * 4) | replace:'kcal' }}</div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.gCho | replace:'g' }}</div>
                                            <div class="col-md-6">
                                                {{ macro.gObtidoCho | replace:'g' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Proteinas</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <form [formGroup]="formPlanoAlim">
                                                    <input class="form-control center-block text-center" type="number"
                                                        step="0.01" placeholder="%" id="distPtnPlan"
                                                        formControlName="distPtnPlan">
                                                </form>
                                            </div>
                                            <div class="col-md-6" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoPtn * 4 * 100)/(macro.gObtidoLip * 9 + macro.gObtidoCho
                                                * 4 + macro.gObtidoPtn * 4) | replace:'%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.kcalPtn | replace:'kcal' }}</div>
                                            <div class="col-md-6">
                                                {{ (macro.gObtidoPtn * 4) | replace:'kcal' }}</div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.gPtn | replace:'g' }}</div>
                                            <div class="col-md-6">
                                                {{ macro.gObtidoPtn | replace:'g' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lipideos</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <form [formGroup]="formPlanoAlim">
                                                    <input class="form-control center-block text-center" type="number"
                                                        step="0.01" placeholder="%" id="distLipPlan"
                                                        formControlName="distLipPlan">
                                                </form>
                                            </div>
                                            <div class="col-md-6" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoLip * 9 * 100)/(macro.gObtidoLip * 9 + macro.gObtidoCho
                                                * 4 + macro.gObtidoPtn * 4) | replace:'%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.kcalLip | replace:'kcal' }}</div>
                                            <div class="col-md-6">
                                                {{ (macro.gObtidoLip * 9) | replace:'kcal' }}</div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">{{ macroPlan.gLip | replace:'g' }}</div>
                                            <div class="col-md-6">
                                                {{ macro.gObtidoLip | replace:'g' }}</div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>Total</th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.distChoPlan.value +
                                                formPlanoAlim.controls.distPtnPlan.value +
                                                formPlanoAlim.controls.distLipPlan.value) | replace:'%' }}
                                            </div>
                                            <div class="col-md-6">100,00 %</div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (macroPlan.kcalCho + macroPlan.kcalPtn + macroPlan.kcalLip) |
                                                replace:'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoLip * 9 + macro.gObtidoCho * 4 + macro.gObtidoPtn * 4)
                                                | replace:'g' }}
                                            </div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row" *ngIf="macro$ | async as macro">
                                            <div class="col-md-6">
                                                {{ (macroPlan.gCho + macroPlan.gPtn + macroPlan.gLip) | replace:'g' }}
                                            </div>
                                            <div class="col-md-6">
                                                {{ (macro.gObtidoLip + macro.gObtidoCho + macro.gObtidoPtn) |
                                                replace:'g' }}
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </tfoot>
                        </table>
                        <div class="row margn-t-lg mt-2">
                            <div class="col-sm-6 col-xs-12">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <th class="no-border"></th>
                                            <th class="no-border text-center">Planejado</th>
                                            <th class="no-border text-center">Obtido</th>
                                        </tr>
                                        <tr>
                                            <th>Proteína por kg de Peso</th>
                                            <td class="text-center">
                                                {{ formPlanoAlim.controls.ptnGKgPeso.value | replace : 'g' }}</td>
                                            <td class="text-center" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoPtn / formPlanoAlim.controls.peso.value) | replace: 'g'
                                                }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Total</th>
                                            <td class="text-center">
                                                {{ (formPlanoAlim.controls.ptnGKgPeso.value *
                                                formPlanoAlim.controls.peso.value) | replace: 'g' }}
                                            </td>
                                            <td class="text-center" *ngIf="macro$ | async as macro">
                                                {{ macro.gObtidoPtn | replace:'g' }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="col-sm-6 col-xs-12">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <th class="no-border"></th>
                                            <th class="no-border text-center">Planejado</th>
                                            <th class="no-border text-center">Obtido</th>
                                        </tr>
                                        <tr>
                                            <th>Calorias por kg de Peso</th>
                                            <td class="text-center">
                                                {{ (formPlanoAlim.controls.energia.value /
                                                formPlanoAlim.controls.peso.value) | replace: 'kcal' }}
                                            </td>
                                            <td class="text-center" *ngIf="macro$ | async as macro">
                                                {{ ( (macro.gObtidoLip * 9 + macro.gObtidoCho * 4 + macro.gObtidoPtn *
                                                4) / formPlanoAlim.controls.peso.value) | replace:'kcal' }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Total</th>
                                            <td class="text-center">
                                                {{ formPlanoAlim.controls.energia.value | replace : 'kcal' }}</td>
                                            <td class="text-center" *ngIf="macro$ | async as macro">
                                                {{ (macro.gObtidoLip * 9 + macro.gObtidoCho * 4 + macro.gObtidoPtn * 4)
                                                | replace: 'kcal' }}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                    <div class="panel-body">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th rowspan="2" style="vertical-align: middle;">Refeição</th>
                                    <th class="text-center">Distribuição (%)</th>
                                    <th class="text-center">kcal</th>
                                </tr>
                                <tr>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-sm-6">Planejado</div>
                                            <div class="col-sm-6">Obtido</div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-sm-6">Planejado</div>
                                            <div class="col-sm-6">Obtido</div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="padd-t-md-important">Café da Manhã</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="cafe" formControlName="cafe">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.cafe * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.cafe.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.cafe | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lanche da Manhã</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="lancheManha"
                                                    formControlName="lancheManha">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.lancheManha * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.lancheManha.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.lancheManha | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Almoço</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="almoco" formControlName="almoco">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.almoco * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.almoco.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.almoco | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lanche da Tarde</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="lancheTarde"
                                                    formControlName="lancheTarde">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.lancheTarde * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.lancheTarde.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.lancheTarde | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Jantar</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="jantar" formControlName="jantar">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.jantar * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.jantar.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.jantar | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lanche da Noite</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="lancheNoite"
                                                    formControlName="lancheNoite">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.lancheNoite * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.lancheNoite.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.lancheNoite | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lanche Extra 1</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="lancheExtra1"
                                                    formControlName="lancheExtra1">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.lancheExtra1 * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.lancheExtra1.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.lancheExtra1 | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="padd-t-md-important">Lanche Extra 2</td>
                                    <td class="text-center">
                                        <div class="row">
                                            <div class="col-md-6" [formGroup]="formPlanoAlim">
                                                <input class="form-control center-block text-center" type="number"
                                                    step="1" placeholder="%" id="lancheExtra2"
                                                    formControlName="lancheExtra2">
                                            </div>
                                            <div class="col-md-6 padd-t-xs"
                                                *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ (distEnergRef.lancheExtra2 * 100) / ( distEnergRef.cafe +
                                                distEnergRef.lancheManha + distEnergRef.almoco +
                                                distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: '%' }}
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center padd-t-md-important">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value *
                                                (formPlanoAlim.controls.lancheExtra2.value / 100)) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ distEnergRef.lancheExtra2 | replace: 'kcal' }}</div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>Total</th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ ( formPlanoAlim.controls.cafe.value +
                                                formPlanoAlim.controls.lancheManha.value +
                                                formPlanoAlim.controls.almoco.value +
                                                formPlanoAlim.controls.lancheTarde.value +
                                                formPlanoAlim.controls.jantar.value +
                                                formPlanoAlim.controls.lancheNoite.value +
                                                formPlanoAlim.controls.lancheExtra1.value +
                                                formPlanoAlim.controls.lancheExtra2.value ) | replace : '%' }}
                                            </div>
                                            <div class="col-md-6">100,00 %</div>
                                        </div>
                                    </th>
                                    <th class="text-center">
                                        <div class="row">
                                            <div class="col-md-6">
                                                {{ (formPlanoAlim.controls.energia.value * (
                                                formPlanoAlim.controls.cafe.value / 100 +
                                                formPlanoAlim.controls.lancheManha.value / 100 +
                                                formPlanoAlim.controls.almoco.value / 100 +
                                                formPlanoAlim.controls.lancheTarde.value / 100 +
                                                formPlanoAlim.controls.jantar.value / 100 +
                                                formPlanoAlim.controls.lancheNoite.value / 100 +
                                                formPlanoAlim.controls.lancheExtra1.value / 100 +
                                                formPlanoAlim.controls.lancheExtra2.value / 100 )) | replace: 'kcal' }}
                                            </div>
                                            <div class="col-md-6" *ngIf="distEnergRef$ | async as distEnergRef">
                                                {{ ( distEnergRef.cafe + distEnergRef.lancheManha + distEnergRef.almoco
                                                + distEnergRef.lancheTarde + distEnergRef.jantar +
                                                distEnergRef.lancheNoite + distEnergRef.lancheExtra1 +
                                                distEnergRef.lancheExtra2 ) | replace: 'kcal' }}
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </tfoot>
                        </table>

                    </div>
                </div>

                <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                    <br><br> <br><br>
                    <div class="panel-body">
                        <div class="row" *ngIf="vitMinerals$ | async as vitMinerals">
                            <div class="col-6">

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Carboidrato</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.carboidratos | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Açúcar Total</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.acucar | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Proteína</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.proteinas | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Fibra</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.fibras | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Colesterol</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.colesterol | replace:'mg' }}</span>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina A</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaA_Retinol | replace:'mcg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina C</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaC | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina D</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaD | replace:'mcg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina E</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaE | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <!-- <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina K</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>245,37 g</span>
                                    </div>
                                </div> -->

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B1</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB1 | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B2</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB2 | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B3</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB3 | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B6</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB6 | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B9</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB9 | replace:'mcg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Vitamina B12</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.vitaminaB12 | replace:'mcg' }}</span>
                                    </div>
                                </div>

                            </div>

                            <div class="col-6">

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Gordura Total</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.gordurasTotais | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Gordura Saturada</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.gordurasSaturadas | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Gordura Monoinsaturada</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.gordurasMonoinsaturadas | replace:'g' }}</span>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Gordura Poli-insaturada</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.gordurasPoliInsaturadas | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Gordura Trans</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.gordurasTrans | replace:'g' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Cálcio</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.calcio | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Cobre</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.cobre | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Ferro</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.ferro | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Fósforo</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.fosforo | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Magnésio</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.magnesio | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Potássio</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.potassio | replace:'mg' }}</span>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Selênio</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.selenio | replace:'mcg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Sódio</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.sodio | replace:'mg' }}</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6 d-flex justify-content-end">
                                        <span>Zinco</span>
                                    </div>
                                    <div class="col-6 d-flex justify-content-start">
                                        <span>{{ vitMinerals.zinco | replace:'mg' }}</span>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-contact2" role="tabpanel" aria-labelledby="nav-contact2-tab">www

                </div>

            </div>
        </div>

    </div>

    <div class="container">
        <div class="row mb-2">
            <div class="col-lg-10">
                <!-- <p class="card-text">*Escolha qual protocolo utilizar, dependendo do sexo e ciclo da vida do paciente. A
                        escolha
                        do protocolo depende da sua conduta profissional.
                        <br>
                        **Gasto energético será usado para cálculo no plano alimentar.
                    </p> -->
            </div>
            <div class="col-lg-2" style="text-align: right;">
                <button type="button" class="btn btn-outline-primary" (click)="pdfModal.show()">Download pdf</button>
            </div>
        </div>
    </div>

</div>



<!--Modal Ref-->
<div class="modal fade" bsModal #classicModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true" [hidden]="hiddenModalRef" [config]="{ignoreBackdropClick: true, keyboard: false}">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Refeição</h4>
                <button type="button" class="close" aria-label="Close" (click)="classicModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: auto; height: 450px;">
                <div class="container">
                    <form [formGroup]="formModalRef">

                        <div class="row" style="max-width: 496px;">
                            <div class="col-sm-5 form-group">
                                <label class="col-form-label strong-class">Horário*</label>
                                <input class="form-control" id="horarioRefeicao" formControlName="horarioRefeicao"
                                    type="time" placeholder="hh:mm" />
                            </div>
                            <div class="col-sm-7 form-group">
                                <label class="col-form-label strong-class">Descrição*</label>
                                <select id="tipoRefeicao" class="form-control" formControlName="tipoRefeicao"
                                    id="tipoRefeicao">
                                    <option value="Café da Manhã">Café da Manhã</option>
                                    <option value="Lanche da Manhã">Lanche da Manhã</option>
                                    <option value="Almoço">Almoço</option>
                                    <option value="Lanche da Tarde">Lanche da Tarde</option>
                                    <option value="Jantar">Jantar</option>
                                    <option value="Lanche da Noite">Lanche da Noite</option>
                                    <option value="Lanche Extra 1">Lanche Extra 1</option>
                                    <option value="Lanche Extra 2">Lanche Extra 2</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mt-2">
                            <div class="col-12">
                                <label class="col-form-label strong-class">Observação</label>
                                <textarea id="observacaoRefeicao" formControlName="observacaoRefeicao"
                                    class="form-control" maxlength="500"></textarea>
                                <small>Caracteres restantes
                                    <span>{{ formModalRef.get('observacaoRefeicao').value === null ? 200 : 200 -
                                        formModalRef.get('observacaoRefeicao').value.length }}</span></small>
                            </div>
                        </div>

                        <div class="row mt-5">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <h5>Alimentos Selecionados</h5>
                                    <button type="button" class="mr-1 mb-1 btn btn-outline-primary"
                                        (click)="smModal.show(); modalHiddenRef(); clearModalAlim(); addOptionFalse()">+
                                        Adicionar Alimento</button>
                                </div>
                            </div>
                        </div>
                    </form>
                    <br>
                    <div class="row">
                        <div class="col-12">
                            <div *ngIf="alimStorePrimary$ | async as alimsPrimary">
                                <div *ngFor="let alim of alimsPrimary">
                                    <hr>
                                    <div class="row d-flex justify-content-between">
                                        <div class="col-9">
                                            <p class="p-custom">{{ alim.descricao }} ( {{ alim.porcao }} :
                                                {{alim.quantidade}} )</p>
                                        </div>
                                        <div class="col-3">
                                            <div class="row">
                                                <div class="row"
                                                    (click)="updateAlim(alim.id); smModal.show(); modalHiddenRef(); addOptionFalse()">
                                                    <em class="fa mr-2 fas fa-edit">
                                                    </em>
                                                    <p class="p-custom-color">Editar</p>
                                                </div>
                                                <div class="row ml-5" (click)="removeAlim(alim.idAlimento)">
                                                    <em class="fa mr-2 fas fa-trash">
                                                    </em>
                                                    <p class="p-custom-color">Remover</p>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12">
                            <div *ngIf="alimStoreSecond$ | async as alimsSecondary">
                                <br>
                                <p *ngIf="alimsSecondary.length > 0"><strong>Segunda Opção</strong></p>
                                <div *ngFor="let alim of alimsSecondary">
                                    <hr>
                                    <div class="row d-flex justify-content-between">
                                        <div class="col-9">
                                            <p class="p-custom">{{ alim.descricao }} ( {{ alim.porcao }} :
                                                {{alim.quantidade}} )</p>
                                        </div>
                                        <div class="col-3">
                                            <div class="row">
                                                <div class="row"
                                                    (click)="updateAlim(alim.id); smModal.show(); modalHiddenRef(); addOptionFalse()">
                                                    <em class="fa mr-2 fas fa-edit">
                                                    </em>
                                                    <p class="p-custom-color">Editar</p>
                                                </div>
                                                <div class="row ml-5" (click)="removeAlim(alim.idAlimento)">
                                                    <em class="fa mr-2 fas fa-trash">
                                                    </em>
                                                    <p class="p-custom-color">Remover</p>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex space-between modal-footer">
                <div>
                    <button type="button" class="btn btn-success"
                        (click)="smModal.show(); modalHiddenRef(); clearModalAlim(); addOption()">+Add 2ª Opção</button>
                </div>
                <div>
                    <button type="button" class="btn btn-info mr-2" data-dismiss="modal"
                        (click)="classicModal.hide()">Cancelar</button>
                    <button type="button" class="btn btn-primary"
                        (click)="classicModal.hide();smModal.hide(); saveOrUpdateRef()"
                        [disabled]="formModalRef.invalid">Salvar</button>
                </div>
            </div>
        </div>
    </div>
</div>


<!--Modal Alim-->
<div bsModal #smModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true" [config]="{ignoreBackdropClick: true, keyboard: false}">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Adicionar Alimento</h4>
                <button type="button" class="close" aria-label="Close" (click)="smModal.hide(); modalHiddenRef()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!--Start Tabela Alimentos-->
                <form [formGroup]="formModalAlim">
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-sm-2">
                                    <strong>
                                        Tabela de Alimentos
                                    </strong>
                                </div>
                                <div class="col-sm-10">
                                    <div class="row">
                                        <div class="form-check-label" *ngFor="let item of tabelas">
                                            <label class="form-check-label mx-3">
                                                <input type="radio" class="form-check-input" [value]="item.valor"
                                                    formControlName="tabelas" />
                                                {{ item.nome }}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div *ngIf="alimentos$ | async as alimentos">
                        <div class="row mt-3">
                            <div class="col-6">
                                <label>
                                    <strong>
                                        Alimento
                                    </strong>
                                </label>
                                <ng-select formControlName="alimento" id="alimento">
                                    <ng-option *ngFor="let alim of alimentos" [value]="alim.id">{{ alim.descricao }}
                                    </ng-option>
                                </ng-select>
                            </div>
                            <div class="col-6 d-flex align-items-end">
                                <!-- <button id="btn-novo-alim" class="btn btn-link" (click)="novaPorcao()"
                                    disabled>Cadastrar Novo
                                    Alimento</button> -->
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <label>
                                    <strong>
                                        Porção
                                    </strong>
                                </label>
                                <select class="form-control" formControlName="porcoes" id="porcoes">
                                    <option *ngFor="let porcao of porcoes"
                                        [value]="porcao.gramas + '-' + porcao.descricao">
                                        {{ porcao.descricao }}
                                    </option>
                                </select>
                            </div>
                            <div class="col-6 d-flex align-items-end">
                                <button id="btn-nova-porcao" class="btn btn-link" (click)="porcaoModal.show()">Cadastrar
                                    Nova
                                    Porção</button>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3 mb-4">
                        <div class="col-4">
                            <label>
                                <strong>
                                    Quantidade <i class="fas fa-info-circle"
                                        title="Quantidade referente a porção que você selecionou. Por exemplo se selecionou Colher, coloque quantas colheres deseja"></i>
                                </strong>
                            </label>
                            <input type="text" class="form-control" formControlName="quantidade" id="quantidade"
                                type="number" step="0.1">
                        </div>
                    </div>

                </form>
                <!--End Tabela Alimentos-->

            </div>
            <div class="modal-footer">
                <button [disabled]="formModalAlim.controls.porcoes.value === null" id="btn-mostrar-nutrientes-alimento"
                    type="button" class="btn btn-info" (click)="buildAndShowAlimInfo();alimDetailModal.show()">Mostrar
                    Nutrientes</button>
                <button [disabled]="formModalAlim.controls.porcoes.value === null" id="btn-add-alimento-continuar"
                    type="button" class="btn btn-primary" (click)="saveAlim(); resetModalAlim()">Incluir e
                    Continuar</button>
                <button [disabled]="formModalAlim.controls.porcoes.value === null" id="btn-add-alimento-fechar"
                    type="button" class="btn btn-success" (click)="saveAlim(); smModal.hide(); modalHiddenRef()">Incluir
                    e Fechar</button>
                <button type="button" class="btn btn-default" (click)="smModal.hide(); modalHiddenRef()">Fechar</button>
            </div>
        </div>
    </div>
</div>

<!--Moda cadastro porcoes-->
<div bsModal #porcaoModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true" [config]="{ignoreBackdropClick: true, keyboard: false}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Nova Porção</h4>
                <button type="button" class="close" aria-label="Close" (click)="porcaoModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="formPorcao">
                    <div class="row">
                        <div class="col-12">
                            <label>Descrição</label>
                            <input type="text" class="form-control" formControlName="descricao"
                                placeholder="Colher, xícara, copo..." id="desc">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-12">
                            <label>Quantidade (gramas)</label>
                            <input type="text" class="form-control" formControlName="gramas" placeholder="g" id="gramas"
                                type="number" step="0.1">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary mr-2" (click)="porcaoModal.hide()">Cancelar</button>
                <button type="button" [disabled]="formPorcao.invalid" class="btn btn-primary"
                    (click)="porcaoModal.hide(); onConfirm()" data-dismiss="modal">Salvar</button>
            </div>
        </div>
    </div>
</div>


<!--Moda Alim Detalhes-->
<div bsModal #alimDetailModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
    aria-labelledby="mySmallModalLabel" aria-hidden="true" [config]="{ignoreBackdropClick: true, keyboard: false}">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" *ngIf="alimentoCalculado$ | async as alim">
            <div class="modal-header">
                <h4 class="modal-title">{{ alim.descricao }}</h4>
                <button type="button" class="close" aria-label="Close" (click)="alimDetailModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: auto; height: 460px;">
                <div class="row">
                    <div class="col-sm-4">
                        <b>Porção:</b><span>{{ alim.porcaoGramas | replace:'g' }}</span>
                    </div>
                    <div class="col-sm-4">
                        <b>Valor Energético:</b><span>{{ alim.calorias | replace:'Kcal' }}</span>
                    </div>
                    <div class="col-sm-4">
                        <b>Grupo:</b><span>{{ alim.grupoAlimentar }}</span>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-6 span-custom">

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Carboidratos:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.carboidratos | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Açúcar:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.acucar | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Proteínas:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.proteinas | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Gorduras Totais:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.gordurasTotais | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Gorduras Saturadas:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.gordurasSaturadas | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Gorduras Monoinsaturadas:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.gordurasMonoinsaturadas | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Gorduras Poli-insaturadas:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.gordurasPoliInsaturadas | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Gorduras Trans:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.gordurasTrans | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Colesterol:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.colesterol | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Fibra Alimentar:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.fibras | replace:'g' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Sódio:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.sodio | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Cálcio:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.calcio | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Ferro:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.ferro | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Potássio:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.potassio | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Fósforo:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.fosforo | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Magnésio:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.magnesio | replace:'mg' }}</span>
                            </div>
                        </div>

                    </div>
                    <div class="col-sm-6 span-custom">

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Zinco:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.zinco | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Manganês:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.manganes | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Cobre:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.cobre | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Selênio:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.selenio | replace:'mcg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina A:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaA_Retinol | replace:'mcg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina D:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaD | replace:'mcg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina E:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaE | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina C:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaC | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Niacina:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB3 | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Ácido Pantotênico:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB5 | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina B6:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB6 | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Riboflavina (Vit. B2):</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB2 | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Tiamina (Vit. B1):</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB1 | replace:'mg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Biotina:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB7 | replace:'mcg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Ácido Fólico:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB9 | replace:'mcg' }}</span>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center">
                            <div class="col-6 d-flex justify-content-end">
                                <b>Vitamina B12:</b>
                            </div>
                            <div class="col-6">
                                <span>{{ alim.vitaminaB12 | replace:'mcg' }}</span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary mr-2" (click)="alimDetailModal.hide()">ok</button>
            </div>
        </div>
    </div>
</div>



<!--Modal impressao pdf-->
<div bsModal #pdfModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true" [config]="{ignoreBackdropClick: true, keyboard: false}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Imprimir dieta</h4>
                <button type="button" class="close" aria-label="Close" (click)="pdfModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12">
                        <label class="form-check-label">
                            <input type="checkbox" [(ngModel)]="showMacroMicroPdf">
                            <span class="margin-left-4 custom-control-description">Exibir distribuição de Macro e
                                Micronutrientes</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary mr-2" (click)="pdfModal.hide()">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="pdfModal.hide(); downloadPdf()"
                    data-dismiss="modal">Imprimir</button>
            </div>
        </div>
    </div>
</div>